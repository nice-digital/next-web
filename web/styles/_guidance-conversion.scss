@use '@nice-digital/nds-core/scss/spacing';
@use '@nice-digital/nds-core/scss/utils';

/* stylelint-disable selector-no-qualifying-type, selector-class-pattern */
// shouldn't be using tags before classes in selectors
// shouldn't be using class names with hyphens
// NB. Neither are generated in next-web

$white: #fff;
$nds-link-color: #005ea5;
$nds-panel-border-color: #adadad;

.chapter {
  div.itemizedlist.indented,
  p.numbered-paragraph {
    margin-left: utils.rem(spacing.$xx-large);
  }

  div.itemizedlist.indented .paragraph-number,
  p.numbered-paragraph .paragraph-number {
    float: left;
    margin-left: utils.rem(-(spacing.$xx-large));
  }

  article.numbered-paragraph {
    display: flex;

    > {
      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        flex: 0 0 utils.rem(spacing.$xx-large);
        font-family: inherit;
        font-size: inherit;
        font-weight: normal;
        line-height: 1.6;
        margin-top: 0;
        padding-right: 10px;
      }
    }

    p:first-child {
      margin-top: 0;
    }
  }
}

// accordion styles
// revisit once component has been added to the design system

.panel--details {
  margin: 0 0 2rem;
  padding: 0;

  &:not(.panel--impact):not(.panel--primary) {
    background: #e9e9e9;
  }

  summary {
    align-items: start;
    color: $nds-link-color;
    cursor: pointer;
    display: flex;
    gap: 0.5em;
    list-style: none;
    padding: 1rem;

    > span {
      text-decoration: underline;
    }

    &::before {
      content: '▶︎';
      flex-shrink: 0;
      transition: 0.3s;
      width: 1em;
    }

    &:hover {
      > span {
        text-decoration: none;
      }

      &::after {
        text-decoration: none;
      }
    }

    &:focus-visible {
      outline: 0.25rem solid #0092a6;
    }
  }

  details {
    position: relative;
  }

  details[open] summary {
    &::before {
      transform: rotate(90deg);
      transform-origin: 40% 45% 0;
    }

    &::after {
      bottom: -2.8rem;
      content: 'Close';
      display: inline-block;
      left: 1rem;
      position: absolute;
      text-decoration: underline;
    }
  }

  &.panel--impact summary {
    color: $white;
  }

  + .panel--details {
    margin-top: -1rem;
  }
}

.panel--reveal {
  // this should be panel__reveal but was accidentally input to the gcs as panel--reveal
  border-left: 4px solid $nds-panel-border-color;
  margin: 1rem 1rem 4rem;
  overflow: auto;
  padding: 0.5rem 1rem;

  p {
    &:first-child {
      margin-top: 0;
    }

    &:last-child {
      margin-bottom: 0;
    }
  }

  .panel--impact & {
    border-color: $white;
  }
}
